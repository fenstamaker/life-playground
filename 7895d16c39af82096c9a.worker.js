!function(Q){var U={};function F(B){if(U[B])return U[B].exports;var s=U[B]={i:B,l:!1,exports:{}};return Q[B].call(s.exports,s,s.exports,F),s.l=!0,s.exports}F.m=Q,F.c=U,F.d=function(Q,U,B){F.o(Q,U)||Object.defineProperty(Q,U,{enumerable:!0,get:B})},F.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},F.t=function(Q,U){if(1&U&&(Q=F(Q)),8&U)return Q;if(4&U&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var B=Object.create(null);if(F.r(B),Object.defineProperty(B,"default",{enumerable:!0,value:Q}),2&U&&"string"!=typeof Q)for(var s in Q)F.d(B,s,function(U){return Q[U]}.bind(null,s));return B},F.n=function(Q){var U=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return F.d(U,"a",U),U},F.o=function(Q,U){return Object.prototype.hasOwnProperty.call(Q,U)},F.p="",F(F.s=0)}([function(module,exports,__webpack_require__){"use strict";eval("\nexports.__esModule = true;\nvar automata_1 = __webpack_require__(1);\nvar ctx = self;\nvar grid = null;\nctx.onmessage = function (e) {\n    grid = e.data;\n};\nvar update = function () {\n    if (grid) {\n        grid = automata_1.step(grid);\n        ctx.postMessage(grid);\n    }\n    setTimeout(update, 500);\n};\nsetTimeout(update, 250);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93b3JrZXIudHM/ZGY3NSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHdDQUF3QztBQUV4QyxJQUFNLEdBQUcsR0FBVyxJQUFXLENBQUM7QUFFaEMsSUFBSSxJQUFJLEdBQVMsSUFBSSxDQUFDO0FBRXRCLEdBQUcsQ0FBQyxTQUFTLEdBQUcsV0FBQztJQUNmLElBQUksR0FBRyxDQUFDLENBQUMsSUFBWSxDQUFDO0FBQ3hCLENBQUMsQ0FBQztBQUVGLElBQU0sTUFBTSxHQUFHO0lBQ2IsSUFBSSxJQUFJLEVBQUU7UUFDUixJQUFJLEdBQUcsZUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2xCLEdBQUcsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDdkI7SUFDRCxVQUFVLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQzFCLENBQUMsQ0FBQztBQUVGLFVBQVUsQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUMiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN0ZXAsIEdyaWQgfSBmcm9tIFwiLi9hdXRvbWF0YVwiO1xuXG5jb25zdCBjdHg6IFdvcmtlciA9IHNlbGYgYXMgYW55O1xuXG5sZXQgZ3JpZDogR3JpZCA9IG51bGw7XG5cbmN0eC5vbm1lc3NhZ2UgPSBlID0+IHtcbiAgZ3JpZCA9IGUuZGF0YSBhcyBHcmlkO1xufTtcblxuY29uc3QgdXBkYXRlID0gKCkgPT4ge1xuICBpZiAoZ3JpZCkge1xuICAgIGdyaWQgPSBzdGVwKGdyaWQpO1xuICAgIGN0eC5wb3N0TWVzc2FnZShncmlkKTtcbiAgfVxuICBzZXRUaW1lb3V0KHVwZGF0ZSwgNTAwKTtcbn07XG5cbnNldFRpbWVvdXQodXBkYXRlLCAyNTApO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n")},function(module,exports,__webpack_require__){"use strict";eval('\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nfunction stepCell(self, neighbors) {\n    var alive = neighbors\n        .map(function (cell) { return cell.state; })\n        .filter(function (state) { return state === "alive"; });\n    if (self.state === "alive" && (alive.length === 2 || alive.length === 3)) {\n        return __assign({}, self, { state: "alive" });\n    }\n    if (self.state === "dead" && alive.length === 3) {\n        return __assign({}, self, { state: "alive" });\n    }\n    return __assign({}, self, { state: "dead" });\n}\nexports.stepCell = stepCell;\nfunction diff(width, x, dx) {\n    return (x + dx + width) % width;\n}\nfunction neighbors(x, y, grid) {\n    var width = grid.length;\n    var height = grid[0].length;\n    var diffX = diff.bind(this, width);\n    var diffY = diff.bind(this, height);\n    var deltaCoords = [\n        [-1, -1],\n        [-1, 0],\n        [-1, 1],\n        [0, -1],\n        [0, 1],\n        [1, -1],\n        [1, 0],\n        [1, 1]\n    ];\n    return deltaCoords\n        .map(function (_a) {\n        var dx = _a[0], dy = _a[1];\n        return grid[diffX(x, dx)][diffY(y, dy)];\n    })\n        .filter(function (x) { return x; });\n}\nfunction step(grid) {\n    return grid.map(function (row, x) {\n        return row.map(function (cell, y) { return stepCell(cell, neighbors(x, y, grid)); });\n    });\n}\nexports.step = step;\nfunction initGrid(width, height, aliveChance) {\n    if (aliveChance === void 0) { aliveChance = 0.1; }\n    var grid = [];\n    for (var x = 0; x < width; x++) {\n        grid[x] = [];\n        for (var y = 0; y < height; y++) {\n            if (Math.random() < aliveChance) {\n                grid[x][y] = {\n                    x: x,\n                    y: y,\n                    state: "alive"\n                };\n            }\n            else {\n                grid[x][y] = {\n                    x: x,\n                    y: y,\n                    state: "dead"\n                };\n            }\n        }\n    }\n    return grid;\n}\nexports.initGrid = initGrid;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hdXRvbWF0YS9pbmRleC50cz85ZDE4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFZQSxTQUFnQixRQUFRLENBQUMsSUFBVSxFQUFFLFNBQXNCO0lBQ3pELElBQU0sS0FBSyxHQUFHLFNBQVM7U0FDcEIsR0FBRyxDQUFDLGNBQUksSUFBSSxXQUFJLENBQUMsS0FBSyxFQUFWLENBQVUsQ0FBQztTQUN2QixNQUFNLENBQUMsZUFBSyxJQUFJLFlBQUssS0FBSyxPQUFPLEVBQWpCLENBQWlCLENBQUMsQ0FBQztJQUV0QyxJQUFJLElBQUksQ0FBQyxLQUFLLEtBQUssT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLElBQUksS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsRUFBRTtRQUN4RSxvQkFDSyxJQUFJLElBQ1AsS0FBSyxFQUFFLE9BQU8sSUFDZDtLQUNIO0lBRUQsSUFBSSxJQUFJLENBQUMsS0FBSyxLQUFLLE1BQU0sSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtRQUMvQyxvQkFDSyxJQUFJLElBQ1AsS0FBSyxFQUFFLE9BQU8sSUFDZDtLQUNIO0lBRUQsb0JBQ0ssSUFBSSxJQUNQLEtBQUssRUFBRSxNQUFNLElBQ2I7QUFDSixDQUFDO0FBdkJELDRCQXVCQztBQUVELFNBQVMsSUFBSSxDQUFDLEtBQWEsRUFBRSxDQUFTLEVBQUUsRUFBVTtJQUNoRCxPQUFPLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUM7QUFDbEMsQ0FBQztBQUVELFNBQVMsU0FBUyxDQUFDLENBQVMsRUFBRSxDQUFTLEVBQUUsSUFBVTtJQUNqRCxJQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQzFCLElBQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUM7SUFDOUIsSUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDckMsSUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDdEMsSUFBTSxXQUFXLEdBQUc7UUFDbEIsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNSLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ1AsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDUCxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNQLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNOLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ1AsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ04sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0tBQ1AsQ0FBQztJQUVGLE9BQU8sV0FBVztTQUNmLEdBQUcsQ0FBQyxVQUFDLEVBQVE7WUFBUCxVQUFFLEVBQUUsVUFBRTtRQUFNLFdBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUFoQyxDQUFnQyxDQUFDO1NBQ25ELE1BQU0sQ0FBQyxXQUFDLElBQUksUUFBQyxFQUFELENBQUMsQ0FBQyxDQUFDO0FBQ3BCLENBQUM7QUFFRCxTQUFnQixJQUFJLENBQUMsSUFBVTtJQUM3QixPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBQyxHQUFHLEVBQUUsQ0FBQztRQUNyQixVQUFHLENBQUMsR0FBRyxDQUFDLFVBQUMsSUFBSSxFQUFFLENBQUMsSUFBSyxlQUFRLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLEVBQXJDLENBQXFDLENBQUM7SUFBM0QsQ0FBMkQsQ0FDNUQsQ0FBQztBQUNKLENBQUM7QUFKRCxvQkFJQztBQUVELFNBQWdCLFFBQVEsQ0FDdEIsS0FBYSxFQUNiLE1BQWMsRUFDZCxXQUF5QjtJQUF6QiwrQ0FBeUI7SUFFekIsSUFBTSxJQUFJLEdBQVMsRUFBRSxDQUFDO0lBQ3RCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDOUIsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUNiLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDL0IsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsV0FBVyxFQUFFO2dCQUMvQixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUc7b0JBQ1gsQ0FBQztvQkFDRCxDQUFDO29CQUNELEtBQUssRUFBRSxPQUFPO2lCQUNmLENBQUM7YUFDSDtpQkFBTTtnQkFDTCxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUc7b0JBQ1gsQ0FBQztvQkFDRCxDQUFDO29CQUNELEtBQUssRUFBRSxNQUFNO2lCQUNkLENBQUM7YUFDSDtTQUNGO0tBQ0Y7SUFFRCxPQUFPLElBQUksQ0FBQztBQUNkLENBQUM7QUExQkQsNEJBMEJDIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgaW50ZXJmYWNlIFByb2Nlc3NDZWxsRnVuY3Rpb24ge1xuICAobmVpZ2hib3JzOiBBcnJheTxDZWxsPik6IENlbGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2VsbCB7XG4gIHg6IG51bWJlcjtcbiAgeTogbnVtYmVyO1xuICBzdGF0ZTogc3RyaW5nO1xufVxuXG5leHBvcnQgdHlwZSBHcmlkID0gQXJyYXk8QXJyYXk8Q2VsbD4+O1xuXG5leHBvcnQgZnVuY3Rpb24gc3RlcENlbGwoc2VsZjogQ2VsbCwgbmVpZ2hib3JzOiBBcnJheTxDZWxsPik6IENlbGwge1xuICBjb25zdCBhbGl2ZSA9IG5laWdoYm9yc1xuICAgIC5tYXAoY2VsbCA9PiBjZWxsLnN0YXRlKVxuICAgIC5maWx0ZXIoc3RhdGUgPT4gc3RhdGUgPT09IFwiYWxpdmVcIik7XG5cbiAgaWYgKHNlbGYuc3RhdGUgPT09IFwiYWxpdmVcIiAmJiAoYWxpdmUubGVuZ3RoID09PSAyIHx8IGFsaXZlLmxlbmd0aCA9PT0gMykpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc2VsZixcbiAgICAgIHN0YXRlOiBcImFsaXZlXCJcbiAgICB9O1xuICB9XG5cbiAgaWYgKHNlbGYuc3RhdGUgPT09IFwiZGVhZFwiICYmIGFsaXZlLmxlbmd0aCA9PT0gMykge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5zZWxmLFxuICAgICAgc3RhdGU6IFwiYWxpdmVcIlxuICAgIH07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIC4uLnNlbGYsXG4gICAgc3RhdGU6IFwiZGVhZFwiXG4gIH07XG59XG5cbmZ1bmN0aW9uIGRpZmYod2lkdGg6IG51bWJlciwgeDogbnVtYmVyLCBkeDogbnVtYmVyKSB7XG4gIHJldHVybiAoeCArIGR4ICsgd2lkdGgpICUgd2lkdGg7XG59XG5cbmZ1bmN0aW9uIG5laWdoYm9ycyh4OiBudW1iZXIsIHk6IG51bWJlciwgZ3JpZDogR3JpZCk6IEFycmF5PENlbGw+IHtcbiAgY29uc3Qgd2lkdGggPSBncmlkLmxlbmd0aDtcbiAgY29uc3QgaGVpZ2h0ID0gZ3JpZFswXS5sZW5ndGg7XG4gIGNvbnN0IGRpZmZYID0gZGlmZi5iaW5kKHRoaXMsIHdpZHRoKTtcbiAgY29uc3QgZGlmZlkgPSBkaWZmLmJpbmQodGhpcywgaGVpZ2h0KTtcbiAgY29uc3QgZGVsdGFDb29yZHMgPSBbXG4gICAgWy0xLCAtMV0sXG4gICAgWy0xLCAwXSxcbiAgICBbLTEsIDFdLFxuICAgIFswLCAtMV0sXG4gICAgWzAsIDFdLFxuICAgIFsxLCAtMV0sXG4gICAgWzEsIDBdLFxuICAgIFsxLCAxXVxuICBdO1xuXG4gIHJldHVybiBkZWx0YUNvb3Jkc1xuICAgIC5tYXAoKFtkeCwgZHldKSA9PiBncmlkW2RpZmZYKHgsIGR4KV1bZGlmZlkoeSwgZHkpXSlcbiAgICAuZmlsdGVyKHggPT4geCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdGVwKGdyaWQ6IEdyaWQpOiBHcmlkIHtcbiAgcmV0dXJuIGdyaWQubWFwKChyb3csIHgpID0+XG4gICAgcm93Lm1hcCgoY2VsbCwgeSkgPT4gc3RlcENlbGwoY2VsbCwgbmVpZ2hib3JzKHgsIHksIGdyaWQpKSlcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRHcmlkKFxuICB3aWR0aDogbnVtYmVyLFxuICBoZWlnaHQ6IG51bWJlcixcbiAgYWxpdmVDaGFuY2U6IG51bWJlciA9IDAuMVxuKTogR3JpZCB7XG4gIGNvbnN0IGdyaWQ6IEdyaWQgPSBbXTtcbiAgZm9yIChsZXQgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7XG4gICAgZ3JpZFt4XSA9IFtdO1xuICAgIGZvciAobGV0IHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHtcbiAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgYWxpdmVDaGFuY2UpIHtcbiAgICAgICAgZ3JpZFt4XVt5XSA9IHtcbiAgICAgICAgICB4LFxuICAgICAgICAgIHksXG4gICAgICAgICAgc3RhdGU6IFwiYWxpdmVcIlxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ3JpZFt4XVt5XSA9IHtcbiAgICAgICAgICB4LFxuICAgICAgICAgIHksXG4gICAgICAgICAgc3RhdGU6IFwiZGVhZFwiXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGdyaWQ7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n')}]);